LOADER_BASE_ADDR equ 0x900
LOADER_START_SECTOR equ 0x2

;=========gdt描述符属性=========
;DESC_G_4K   equ 1_00000000000000000000000b
;DESC_G_0     equ  0x00000000
;DESC_D_32   equ 1_0000000000000000000000b
;DESC_L  equ 0_000000000000000000000b
;DESC_AVL equ    0_00000000000000000000b
;DESC_LIMIT_CODE2 equ    1111_0000000000000000b
;DESC_LIMIT_DATA2 equ    DESC_LIMIT_CODE2
;DESC_LIMIT_VIDEO2   equ 0000_000000000000000b

;DESC_P  equ 1_000000000000000b
;DESC_DPL_0   equ 00_0000000000000b
;DESC_DPL_1  equ 01_0000000000000b
;DESC_DPL_2  equ 10_0000000000000b  
;DESC_DPL_3  equ 11_0000000000000b
;DESC_S_CODE  equ 1_000000000000b
;DESC_S_DATA equ DESC_S_CODE
;DESC_S_sys  equ 0_000000000000b
;DESC_TYPE_CODE  equ 1000_00000000b
;x=1,c=0,r=0,a=0 代码段是可执行的，非一致性，不可读，已访问位 a 清 0
;DESC_TYPE_DATA  equ 0010_00000000b
;x=0,e=0,w=1,a=0 数据段是不可执行的，向上扩展的，可写，已访问位 a 清 0

; ======== 建议直接使用的宏（可复制到 boot.inc，替换旧的二进制写法） ========
DESC_G_4K     equ 0x00800000    ; G = 1 (4K)
DESC_G_0      equ 0x00000000    ; G = 0 (byte)
DESC_D_32     equ 0x00400000    ; D/B = 1 (32-bit)
DESC_L        equ 0x00000000    ; L = 0 (not 64-bit code)
DESC_AVL      equ 0x00100000    ; AVL = 1 (optional)

DESC_LIMIT_CODE2 equ 0x000F0000
DESC_LIMIT_DATA2 equ DESC_LIMIT_CODE2
DESC_LIMIT_VIDEO2 equ 0x00000000

DESC_P       equ 0x00008000
DESC_DPL_0   equ 0x00000000
DESC_DPL_1   equ 0x00002000
DESC_DPL_2   equ 0x00004000
DESC_DPL_3   equ 0x00006000

DESC_S_CODE  equ 0x00001000
DESC_S_DATA  equ DESC_S_CODE
DESC_S_sys   equ 0x00000000

; type
DESC_TYPE_CODE equ 0x00000A00
DESC_TYPE_DATA equ 0x00000200

; video high dword (base_high = 0x0B, G=0, D/B=1, P=1, S=1, type=DATA)
DESC_CODE_HIGH4 equ (0x00 << 24) + DESC_G_4K + DESC_D_32 + \
DESC_L + DESC_AVL + DESC_LIMIT_CODE2 + \
DESC_P+DESC_DPL_0 + DESC_S_CODE +\
DESC_TYPE_CODE + 0x00

DESC_DATA_HIGH4 equ (0x00 << 24) + DESC_G_4K + DESC_D_32 + \
DESC_L + DESC_AVL + DESC_LIMIT_DATA2 + \
DESC_P + DESC_DPL_0 + DESC_S_DATA + \
DESC_TYPE_DATA + 0x00

;DESC_VIDEO_HIGH4 equ (0x000B8 << 16) + DESC_G_4K + DESC_D_32 + \
;DESC_P + DESC_DPL_0 + DESC_S_DATA + DESC_TYPE_DATA


;DESC_VIDEO_HIGH4 equ (0x00 << 24) + DESC_G_4K + DESC_D_32 +DESC_L + DESC_AVL +DESC_LIMIT_VIDEO2 + DESC_P +DESC_DPL_0 + DESC_S_DATA+ DESC_TYPE_DATA + 0x00
DESC_VIDEO_HIGH4 equ (0x000B8 << 16) + DESC_G_4K + DESC_D_32 + DESC_P + DESC_DPL_0 + DESC_S_DATA + DESC_TYPE_DATA


;选择子属性
RPL0    equ 00b
RPL1    equ 01b
RPL2    equ 10b 
RPL3    equ 11b 
TI_GDT  equ 000b 
TI_LDT  equ 100b

;页表相关
PAGE_DIR_TABLE_POS equ 0x100000
PG_P equ 10b
PG_RW_R equ 00b 
PG_RW_W equ 10b 
PG_US_S equ 000b
PG_US_U equ 100b 